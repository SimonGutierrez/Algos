const agencyApi = [
    {
        agency_expenditures: 'Mayoralty'
      },
      {
        agency_expenditures: 'Personal Services',
        fy2018: '104,271,057',
        fy2017: '95,557,116',
        fy2016: '86,771,665',
        fy2015: '78,678,505',
        fy2014: '73,713,601',
        fy_2013: '71,140,709',
        fy_2012: '71,624,012',
        fy_2011: '73,771,082',
        fy_2010: '75,061,578',
        fy_2009: '70,247,009',
        fy_2008: '68,453,093',
        fy_2007: '65,151,382',
        fy_2006: '58,832,895',
        fy_2005: '55,076,606',
        fy_2004: '53,107,606',
        fy_2003: '54,144,418',
        fy_2002: '55,809,508',
        fy_2001: '54,304,689',
        fy_2000: '51,237,394',
        fy_1999: '48,835,077',
        fy_1998: '49,248,813',
        fy_1997: '48,974,867',
        fy_1996: '51,469,945',
        fy_1995: '51,427,496',
        fy_1994: '59,980,231',
        fy_1993: '61,117,383',
        fy_1992: '57,217,931',
        fy_1991: '59,614,205',
        fy_1990: '61,545,086',
        fy_1989: '63,504,325',
        fy_1988: '57,133,694',
        fy_1987: '51,193,887',
        fy_1986: '46,881,708',
        fy_1985: '43,298,830',
        fy_1984: '37,430,437',
        fy_1983: '32,820,750',
        fy_1982: '27,266,928',
        fy_1981: '25,487,455',
        fy_1980: '24,665,590'
      },
      {
        agency_expenditures: 'Other Than Personal Services',
        fy2018: '24,511,594',
        fy2017: '25,706,180',
        fy2016: '22,760,900',
        fy2015: '23,043,083',
        fy2014: '22,073,410',
        fy_2013: '22,036,473',
        fy_2012: '21,722,405',
        fy_2011: '21,112,836',
        fy_2010: '20,441,485',
        fy_2009: '20,685,599',
        fy_2008: '20,923,973',
        fy_2007: '20,514,975',
        fy_2006: '20,268,853',
        fy_2005: '20,229,762',
        fy_2004: '19,831,146',
        fy_2003: '40,304,264',
        fy_2002: '53,863,965',
        fy_2001: '34,818,177',
        fy_2000: '40,034,618',
        fy_1999: '35,698,282',
        fy_1998: '33,388,671',
        fy_1997: '32,271,275',
        fy_1996: '33,216,441',
        fy_1995: '62,920,727',
        fy_1994: '73,428,154',
        fy_1993: '75,800,654',
        fy_1992: '70,571,580',
        fy_1991: '64,458,446',
        fy_1990: '62,615,189',
        fy_1989: '77,781,169',
        fy_1988: '76,485,351',
        fy_1987: '67,723,793',
        fy_1986: '62,375,745',
        fy_1985: '51,060,508',
        fy_1984: '40,744,140',
        fy_1983: '39,530,054',
        fy_1982: '26,079,183',
        fy_1981: '22,404,893',
        fy_1980: '21,265,058'
      },
      {
        agency_expenditures: 'less: intra-city',
        fy2018: '(3,770,534)',
        fy2017: '(1,532,525)',
        fy2016: '(1,386,226)',
        fy2015: '(1,312,100)',
        fy2014: '(985,788)',
        fy_2013: '(1,137,908)',
        fy_2012: '(1,437,660)',
        fy_2011: '(1,559,560)',
        fy_2010: '(1,664,742)',
        fy_2009: '(1,710,322)',
        fy_2008: '(1,750,454)',
        fy_2007: '(1,675,981)',
        fy_2006: '(2,352,945)',
        fy_2005: '(2,499,351)',
        fy_2004: '(2,522,146)',
        fy_2003: '(2,409,214)',
        fy_2002: '(1,502,095)',
        fy_2001: '(1,513,206)',
        fy_2000: '(1,296,587)',
        fy_1999: '(1,310,874)',
        fy_1998: '(978,514)',
        fy_1997: '(906,654)',
        fy_1996: '(1,124,946)',
        fy_1995: '(742,040)',
        fy_1994: '(1,469,085)',
        fy_1993: '(1,913,351)',
        fy_1992: '(809,027)',
        fy_1991: '- 0',
        fy_1990: '(127,872)',
        fy_1989: '(223,394)',
        fy_1988: '(83,499)',
        fy_1987: '(216,211)',
        fy_1986: '(329,192)',
        fy_1985: '(323,053)',
        fy_1984: '(44,921)',
        fy_1983: '(63,003)',
        fy_1982: '(21,091)',
        fy_1981: '(2,173,165)',
        fy_1980: '(2,352,824)'
      },
      {
        agency_expenditures: 'prior year adjustments',
        fy2018: '(72,355)',
        fy2017: '(177,437)',
        fy2016: '(30,583)',
        fy2015: '(149,761)',
        fy2014: '(88,197)',
        fy_2013: '(40,647)',
        fy_2012: '(7,228)',
        fy_2011: '(9,329)',
        fy_2010: '(6,948)',
        fy_2009: '(210,989)',
        fy_2008: '(124,441)',
        fy_2007: '(829,934)',
        fy_2006: '(581,009)',
        fy_2005: '(2,165,328)',
        fy_2004: '(899,762)',
        fy_2003: '(731,766)',
        fy_2002: '(1,616,189)',
        fy_2001: '(1,871,189)',
        fy_2000: '(1,970,493)',
        fy_1999: '(2,845,112)',
        fy_1998: '(5,439,393)',
        fy_1997: '(4,072,946)',
        fy_1996: '(3,359,992)',
        fy_1995: '(2,587,789)',
        fy_1994: '(2,597,221)',
        fy_1993: '(243,075)',
        fy_1992: '(155,973)',
        fy_1991: '(7,384,393)',
        fy_1990: '(783,524)',
        fy_1989: '(6,949,504)',
        fy_1988: '(753,805)',
        fy_1987: '(750,786)',
        fy_1986: '(106,778)',
        fy_1985: '(217,187)',
        fy_1984: '(129,594)',
        fy_1983: '(201,350)',
        fy_1982: '(238,286)',
        fy_1981: '(550,037)',
        fy_1980: '(1,047,327)'
      },
      {
        agency_expenditures: 'TOTAL DEPT.',
        fy2018: '124,939,762',
        fy2017: '119,553,334',
        fy2016: '108,115,756',
        fy2015: '100,259,727',
        fy2014: '94,713,026',
        fy_2013: '91,998,627',
        fy_2012: '91,901,529',
        fy_2011: '93,315,029',
        fy_2010: '93,831,373',
        fy_2009: '89,011,297',
        fy_2008: '87,502,171',
        fy_2007: '83,160,442',
        fy_2006: '76,167,794',
        fy_2005: '70,641,689',
        fy_2004: '69,516,844',
        fy_2003: '91,307,702',
        fy_2002: '106,555,189',
        fy_2001: '85,738,471',
        fy_2000: '88,004,932',
        fy_1999: '80,377,373',
        fy_1998: '76,219,577',
        fy_1997: '76,266,542',
        fy_1996: '80,201,448',
        fy_1995: '111,018,394',
        fy_1994: '129,342,079',
        fy_1993: '134,761,611',
        fy_1992: '126,824,511',
        fy_1991: '116,688,258',
        fy_1990: '123,248,879',
        fy_1989: '134,112,596',
        fy_1988: '132,781,741',
        fy_1987: '117,950,683',
        fy_1986: '108,821,483',
        fy_1985: '93,819,098',
        fy_1984: '78,000,062',
        fy_1983: '72,086,451',
        fy_1982: '53,086,734',
        fy_1981: '45,169,146',
        fy_1980: '42,530,497'
      },
      {
        agency_expenditures: 'Board of Elections'
      },
      {
        agency_expenditures: 'Personal Services',
        fy2018: '64,776,829',
        fy2017: '63,093,088',
        fy2016: '54,045,441',
        fy2015: '51,391,433',
        fy2014: '57,409,729',
        fy_2013: '52,682,096',
        fy_2012: '57,651,415',
        fy_2011: '48,487,298',
        fy_2010: '26,951,395',
        fy_2009: '25,975,721',
        fy_2008: '24,714,455',
        fy_2007: '21,977,661',
        fy_2006: '17,839,400',
        fy_2005: '16,961,965',
        fy_2004: '15,987,658',
        fy_2003: '15,252,887',
        fy_2002: '15,940,005',
        fy_2001: '14,069,096',
        fy_2000: '12,322,639',
        fy_1999: '12,265,762',
        fy_1998: '10,839,979',
        fy_1997: '10,734,590',
        fy_1996: '9,958,645',
        fy_1995: '10,238,834',
        fy_1994: '11,224,000',
        fy_1993: '11,863,473',
        fy_1992: '10,814,616',
        fy_1991: '9,634,607',
        fy_1990: '9,823,858',
        fy_1989: '9,633,184',
        fy_1988: '9,362,415',
        fy_1987: '8,113,087',
        fy_1986: '8,166,082',
        fy_1985: '7,779,539',
        fy_1984: '6,927,144',
        fy_1983: '6,437,772',
        fy_1982: '5,304,959',
        fy_1981: '4,901,327',
        fy_1980: '5,501,171'
      },
      {
        agency_expenditures: 'Other Than Personal Services',
        fy2018: '64,539,613',
        fy2017: '58,525,002',
        fy2016: '62,626,678',
        fy2015: '55,363,697',
        fy2014: '58,753,237',
        fy_2013: '54,790,559',
        fy_2012: '52,187,109',
        fy_2011: '54,387,051',
        fy_2010: '68,754,724',
        fy_2009: '55,078,726',
        fy_2008: '55,961,752',
        fy_2007: '49,770,386',
        fy_2006: '45,457,112',
        fy_2005: '42,826,507',
        fy_2004: '52,071,367',
        fy_2003: '40,377,339',
        fy_2002: '51,541,788',
        fy_2001: '30,091,758',
        fy_2000: '31,906,479',
        fy_1999: '32,175,544',
        fy_1998: '25,825,034',
        fy_1997: '20,119,578',
        fy_1996: '23,144,079',
        fy_1995: '19,394,209',
        fy_1994: '22,540,840',
        fy_1993: '23,486,869',
        fy_1992: '20,925,934',
        fy_1991: '16,695,690',
        fy_1990: '19,943,280',
        fy_1989: '20,201,792',
        fy_1988: '17,631,558',
        fy_1987: '11,912,750',
        fy_1986: '14,513,723',
        fy_1985: '12,179,483',
        fy_1984: '11,216,874',
        fy_1983: '14,959,564',
        fy_1982: '11,399,530',
        fy_1981: '9,612,429',
        fy_1980: '12,144,657'
      },
      {
        agency_expenditures: 'less: intra-city',
        fy2018: '- 0',
        fy2017: '- 0',
        fy2016: '- 0',
        fy2015: '- 0',
        fy2014: '- 0',
        fy_2013: '- 0',
        fy_2012: '- 0',
        fy_2011: '- 0',
        fy_2010: '- 0',
        fy_2009: '- 0',
        fy_2008: '- 0',
        fy_2007: '- 0',
        fy_2006: '- 0',
        fy_2005: '- 0',
        fy_2004: '- 0',
        fy_2003: '- 0',
        fy_2002: '- 0',
        fy_2001: '- 0',
        fy_2000: '- 0',
        fy_1999: '- 0',
        fy_1998: '- 0',
        fy_1997: '- 0',
        fy_1996: '- 0',
        fy_1995: '- 0',
        fy_1994: '- 0',
        fy_1993: '- 0',
        fy_1992: '- 0',
        fy_1991: '- 0',
        fy_1990: '- 0',
        fy_1989: '- 0',
        fy_1988: '- 0',
        fy_1987: '- 0',
        fy_1986: '- 0',
        fy_1985: '- 0',
        fy_1984: '- 0',
        fy_1983: '- 0',
        fy_1982: '- 0',
        fy_1981: '- 0',
        fy_1980: '- 0'
      },
      {
        agency_expenditures: 'prior year adjustments',
        fy2018: '(31,474)',
        fy2017: '(120,660)',
        fy2016: '(593,946)',
        fy2015: '(69,413)',
        fy2014: '(81,557)',
        fy_2013: '(607)',
        fy_2012: '212',
        fy_2011: '(51,502)',
        fy_2010: '(52,000)',
        fy_2009: '- 0',
        fy_2008: '(1,986)',
        fy_2007: '- 0',
        fy_2006: '(848,601)',
        fy_2005: '- 0',
        fy_2004: '(51,643)',
        fy_2003: '(1,408,526)',
        fy_2002: '(363)',
        fy_2001: '- 0',
        fy_2000: '- 0',
        fy_1999: '(219,566)',
        fy_1998: '(2,891)',
        fy_1997: '(94,575)',
        fy_1996: '(108,264)',
        fy_1995: '(7,356)',
        fy_1994: '(881)',
        fy_1993: '(527,493)',
        fy_1992: '(33,001)',
        fy_1991: '(106,585)',
        fy_1990: '(333)',
        fy_1989: '(2,945)',
        fy_1988: '(55,651)',
        fy_1987: '(339)',
        fy_1986: '(119,864)',
        fy_1985: '(47)',
        fy_1984: '(35,394)',
        fy_1983: '(11)',
        fy_1982: '(7,275)',
        fy_1981: '(22,782)',
        fy_1980: '(626,114)'
      },
      {
        agency_expenditures: 'TOTAL DEPT.',
        fy2018: '129,284,968',
        fy2017: '121,497,430',
        fy2016: '116,078,173',
        fy2015: '106,685,717',
        fy2014: '116,081,409',
        fy_2013: '107,472,048',
        fy_2012: '109,838,736',
        fy_2011: '102,822,847',
        fy_2010: '95,654,119',
        fy_2009: '81,054,447',
        fy_2008: '80,674,221',
        fy_2007: '71,748,047',
        fy_2006: '62,447,911',
        fy_2005: '59,788,472',
        fy_2004: '68,007,382',
        fy_2003: '54,221,700',
        fy_2002: '67,481,430',
        fy_2001: '44,160,854',
        fy_2000: '44,229,118',
        fy_1999: '44,221,740',
        fy_1998: '36,662,122',
        fy_1997: '30,759,593',
        fy_1996: '32,994,460',
        fy_1995: '29,625,687',
        fy_1994: '33,763,959',
        fy_1993: '34,822,849',
        fy_1992: '31,707,549',
        fy_1991: '26,223,712',
        fy_1990: '29,766,805',
        fy_1989: '29,832,031',
        fy_1988: '26,938,322',
        fy_1987: '20,025,498',
        fy_1986: '22,559,941',
        fy_1985: '19,958,975',
        fy_1984: '18,108,624',
        fy_1983: '21,397,325',
        fy_1982: '16,697,214',
        fy_1981: '14,490,974',
        fy_1980: '17,019,714'
      },
];

// let test = 'expenditures';
// console.log(agencyApi[0][`agency_${test}`])

function parseAgencyApi(apiData) {
    let parsedData = [];
    let dept = {};

    // loop through the data retrieved from the API
    for (let i = 0; i < apiData.length; i++) {
        let elem = apiData[i];
        // if an element has only one key we know that key is the name of the department we are lookin at right now
        if (Object.keys(elem).length === 1) {
            dept.name = elem.agency_expenditures;
        }
        // if the name of the expendature is 'total dept' we want to loop through that object and add each years expense for the last five years
        if (elem.agency_expenditures === 'TOTAL DEPT.') {
            for (let year = 2018; year > 2013; year--) {
                //adding the year and its exp to our dept object
                dept[`${year}`] = elem[`fy${year}`];
            }
            // finally add our department to our parsed data array and reset the dept obj so we can be ready for the next one.
            parsedData.push(dept);
            dept = {};
        }
    }

    return parsedData;
}

// console.log(parseAgencyApi(agencyApi))

const returnedArray = [
    { agency: 'NYPD',
    data: [
      {x: 2015,
      y: 500000},
      {x: 2016,
      y: 500000},
      {x: 2017,
      y: 500000},
    ]},
    { agency: 'Education',
    data: [
      {x: 2015,
      y: 400000},
      {x: 2016,
      y: 1600000},
      {x: 2017,
      y: 200000},
    ]}
  ];

function findHighestYLowestX(data) {
    let y = -Infinity;
    let x = Infinity;

    for (let i = 0; i < data.length; i++) {
        let currElem = data[i];
        for (let k = 0; k < currElem.data.length; k++) {
            let currXAndY = currElem.data[k];
            if (currXAndY.x < x) {
                x = currXAndY.x;
            }
            if (currXAndY.y > y) {
                y = currXAndY.y
            }
        }
    }

    return {y, x};
}

console.log(findHighestYLowestX(returnedArray))
